# pyPlotFormat
Tool for fast and consistent plot generation with the Matplotlib library.

## About
This tool aims to apply constistent formatting in the creation of data visualisation methods generated through the matplotlib library in Python. It also aims to speed up the process of producing publishable-quality figures by directly producing PDF images that can be inserted into documents. Importantly, the PDF figures generated by this tool are limited to 3 sizes (W x H):

- 'single' - 8cm x 7cm
- 'double' - 16cm x 7cm
- 'large' - 16cm x 14cm

The width's that are used here are designed to fit on an A4 page with 1in margins, which is standard for many manuscript formats (including AIAA). Either two adjecent 'single' figures or one 'double' or 'large' figure will align with the text. Figure legends can be produced as a separate PDF file and combined with the corresponding figure at the word processing or document markup stage.

When including the PDF figures in a document rescaling should be avoided as the text size is predefined by the formatter. By default the format uses 10pt text, though this can be set as desired.

## Installation
First clone the repository using,

```shell
git clone https://github.com/sfpullin/plotter.git
```

Then move into the cloned directory and install using ```pip```:

```shell
pip install .
```

## Quickstart

### Formattting a 2D plot
Before formatting a plot, one must be created through the matplotlib library. As an example we can create a simple graph of ```y = sin(x)``` and then return a ```Figure``` and ```Axes``` matplotlib object using the ```matplotlib.pyplot.subplots()```python funciton:

```python
import numpy as np
from matplotlib import pyplot as plt

x = np.linspace(0.0, 4*np.pi, 100)
y = np.sin(x)

fig, ax = plt.subplots()
ax.plot(x,y, "--", label="sin(x)")
```

Here the required linestyle and labels should be included. Line color and other options related to the plot should be specified later in the relevant format object.

The formatting of this figure is then handled with the Format class provided in the corresponding plotting module. In this case:

```python
import pyplotformat.plot as ppf

pformat = ppf.Format2D(shape="single", fonsize=10)
```

This creates a format object ```pformat``` and specifies that the figure should be a 'single' size (8cm x 7cm) and the font size should be 10pt. (Note these are the default values of thes input variables, but are included here as an example) 

The figure created earlier can then be formatted by supplying the ```Figure``` object to the ```Format``` object:

```python
fig, ax = pformat(fig, xlabel="x", ylabel="y")
```

The above line passes the ```Figure``` and ```Axes``` object to be formatted. Additionally we specify a label for the x and y axis. Other options, which include line colors and axis limits, can be found in the documentation. The returned values are the newly formatted ```Figure``` and ```Axes``` matplotlib objects.

A legend must be created separately using the ```FormatLegend``` formatter. For our example this will become:

```python
lformat = ppf.FormatLegend()

leg = lformat(fig)
```

This creates a new ```Figure``` object that contains only the legend. This can then be printed separately and processed along with the figure.

To produce the PDF of these figures the write_pdf function can be used:

```python
from pyplotformat import write_pdf

write_pdf(fig, "my_figure.pdf")
write_pdf(leg, "my_legend.pdf")
```

This will create a PDF of both the figure, named "example.pdf" and the legend, named "example_legend.pdf". These can then be directly included in a document through a word processing or document markup software.

### Saving a figure
It is also possible to save a figure for later formatting or modification if required. This can be achived through the utils module. Assuming that a matplotlib ```Figure``` and ```Axes``` objects have been created, named ```fig``` and ```ax``` respectively, the figure can be saved using,

```python
from pyplotformat import save_figure

save_figure("example.fig", fig, ax)
```

This will save the figure as "example.fig" in the working directory. The figure file can then be loaded when required:

```python
from pyplotformat import load_figure

fig, ax = load_figure("example.fig")
```

The figure can then be modified and printed.


### Inkscape integration

Inkscape (https://inkscape.org/) is an open source document creation and editing software that is very useful for modifying vector based graphics. Pyplotformat provides the ```inkscape()``` function that automatically opens a figure, (or list of figures) in inkscape provided it is downloaded and can be accessed from the commandline argument ```inkscape```.

```python
from pyplotformat import inkscape()

inkscape([fig, leg])
```

Calling this function will open inkscape and allow editing of a figure. Once complete, closing inkscape will resume the Python script, allowing multiple calls to inkscape to be made sequentially.

## Reference documentaion

**To be completed**
